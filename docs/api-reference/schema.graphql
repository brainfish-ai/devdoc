"""
DevDoc GraphQL API Schema
Example schema demonstrating GraphQL documentation capabilities
"""

# Custom scalar types
scalar DateTime
scalar JSON

"""
A user in the system
"""
type User {
  "Unique identifier"
  id: ID!
  "User's email address"
  email: String!
  "Display name"
  name: String!
  "When the user was created"
  createdAt: DateTime!
  "User's projects"
  projects: [Project!]!
}

"""
A documentation project
"""
type Project {
  "Unique identifier"
  id: ID!
  "Project name"
  name: String!
  "Project slug for URLs"
  slug: String!
  "Project description"
  description: String
  "Project owner"
  owner: User!
  "Documentation pages"
  pages: [Page!]!
  "When the project was created"
  createdAt: DateTime!
  "When the project was last updated"
  updatedAt: DateTime!
}

"""
A documentation page
"""
type Page {
  "Unique identifier"
  id: ID!
  "Page title"
  title: String!
  "Page slug for URLs"
  slug: String!
  "Page content in MDX format"
  content: String!
  "Parent project"
  project: Project!
  "Page order in navigation"
  order: Int!
  "When the page was last updated"
  updatedAt: DateTime!
}

"""
Input for creating a new project
"""
input CreateProjectInput {
  "Project name"
  name: String!
  "Project slug (optional, auto-generated if not provided)"
  slug: String
  "Project description"
  description: String
}

"""
Input for updating a project
"""
input UpdateProjectInput {
  "New project name"
  name: String
  "New project description"
  description: String
}

"""
Input for creating a new page
"""
input CreatePageInput {
  "Page title"
  title: String!
  "Page slug"
  slug: String!
  "Page content in MDX format"
  content: String!
  "Page order in navigation"
  order: Int
}

"""
Input for updating a page
"""
input UpdatePageInput {
  "New page title"
  title: String
  "New page content"
  content: String
  "New page order"
  order: Int
}

"""
Pagination information
"""
type PageInfo {
  "Whether there are more pages after this"
  hasNextPage: Boolean!
  "Whether there are pages before this"
  hasPreviousPage: Boolean!
  "Cursor for the first item"
  startCursor: String
  "Cursor for the last item"
  endCursor: String
}

"""
A paginated list of projects
"""
type ProjectConnection {
  "List of projects"
  edges: [ProjectEdge!]!
  "Pagination info"
  pageInfo: PageInfo!
  "Total count of projects"
  totalCount: Int!
}

"""
An edge in the project connection
"""
type ProjectEdge {
  "The project"
  node: Project!
  "Cursor for this project"
  cursor: String!
}

"""
Query root
"""
type Query {
  "Get the currently authenticated user"
  me: User
  
  "Get a user by ID"
  user(id: ID!): User
  
  "Get a project by ID"
  project(id: ID!): Project
  
  "Get a project by slug"
  projectBySlug(slug: String!): Project
  
  "List all projects for the current user"
  projects(
    "Number of items to return"
    first: Int
    "Cursor to start after"
    after: String
    "Number of items to return from the end"
    last: Int
    "Cursor to start before"
    before: String
  ): ProjectConnection!
  
  "Get a page by ID"
  page(id: ID!): Page
  
  "Search pages by content"
  searchPages(
    "Search query"
    query: String!
    "Project ID to search within"
    projectId: ID
  ): [Page!]!
}

"""
Mutation root
"""
type Mutation {
  "Create a new project"
  createProject(input: CreateProjectInput!): Project!
  
  "Update an existing project"
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  
  "Delete a project"
  deleteProject(id: ID!): Boolean!
  
  "Create a new page in a project"
  createPage(projectId: ID!, input: CreatePageInput!): Page!
  
  "Update an existing page"
  updatePage(id: ID!, input: UpdatePageInput!): Page!
  
  "Delete a page"
  deletePage(id: ID!): Boolean!
  
  "Reorder pages in a project"
  reorderPages(projectId: ID!, pageIds: [ID!]!): [Page!]!
}

"""
Subscription root
"""
type Subscription {
  "Subscribe to page updates in a project"
  pageUpdated(projectId: ID!): Page!
  
  "Subscribe to new pages in a project"
  pageCreated(projectId: ID!): Page!
  
  "Subscribe to page deletions in a project"
  pageDeleted(projectId: ID!): ID!
}
